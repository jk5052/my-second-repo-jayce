<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Floating Eyes Interactive</title>
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            background: #000000;
            height: 100vh;
            position: relative;
            user-select: none;
        }

        .container {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .eye {
            position: absolute;
            width: 400px;
            height: 400px;
            cursor: grab;
            transition: all 0.3s ease;
            border-radius: 50%;
            box-shadow: 0 8px 30px rgba(255, 255, 255, 0.2);
            animation: float 6s ease-in-out infinite;
            z-index: 10;
        }

        .eye:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 40px rgba(255, 255, 255, 0.3);
        }

        .eye:active {
            cursor: grabbing;
            transform: scale(1.1);
            box-shadow: 0 15px 50px rgba(255, 255, 255, 0.4);
            z-index: 100;
        }

        .eye.dragging {
            animation: none;
            cursor: grabbing;
            transform: scale(1.1);
            box-shadow: 0 15px 50px rgba(255, 255, 255, 0.5);
            z-index: 100;
        }

        .eye img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            pointer-events: none;
        }

        .eye-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-family: 'Special Elite', cursive;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            text-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.9),
                -1px -1px 2px rgba(0, 0, 0, 0.9),
                1px -1px 2px rgba(0, 0, 0, 0.9),
                -1px 1px 2px rgba(0, 0, 0, 0.9);
            pointer-events: none;
            z-index: 20;
            max-width: 180px;
            line-height: 1.2;
            background: rgba(0, 0, 0, 0.7);
            padding: 8px 12px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
            transform: translate(-50%, -50%) scale(0.8);
        }

        .eye:hover .eye-label {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .eye.closing {
            animation: closeEye 0.5s ease-out forwards;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-30px) rotate(2deg); }
            50% { transform: translateY(-15px) rotate(-1deg); }
            75% { transform: translateY(-25px) rotate(1deg); }
        }

        @keyframes closeEye {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(0.8); opacity: 0.3; }
        }

        .see-through-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
            font-size: 4rem;
            font-weight: bold;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
            z-index: 5;
            pointer-events: none;
            opacity: 0.7;
            letter-spacing: 3px;
        }

        .drag-hint {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            font-size: 1.2rem;
            z-index: 5;
            pointer-events: none;
        }

        .explore-buttons {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 100;
        }

        .explore-btn {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 12px 24px;
            color: white;
            text-decoration: none;
            font-family: 'Special Elite', 'Courier New', monospace;
            font-size: 0.9rem;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .explore-btn:hover {
            background: rgba(0, 0, 0, 0.8);
            border-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .explore-btn:active {
            transform: translateY(0);
        }

        .final-presentation-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 25px;
            padding: 12px 24px;
            color: white;
            text-decoration: none;
            font-family: 'Special Elite', 'Courier New', monospace;
            font-size: 0.9rem;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 200;
        }

        .final-presentation-btn:hover {
            background: rgba(0, 0, 0, 0.9);
            border-color: rgba(255, 255, 255, 0.7);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .final-presentation-btn:active {
            transform: translateY(0);
        }

        .play-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            color: white;
            text-decoration: none;
            padding: 15px 25px;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            font-weight: bold;
            font-size: 14px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 200;
        }

        .play-btn:hover {
            background: rgba(0, 0, 0, 0.9);
            border-color: rgba(255, 255, 255, 0.7);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .play-btn:active {
            transform: translateY(0);
        }

        .page-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle, rgba(0,0,0,0.9) 0%, rgba(0,0,0,1) 100%);
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease-in-out;
            z-index: 1000;
        }

        .page-transition.active {
            opacity: 1;
            pointer-events: all;
        }

        .info-page {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
            padding: 50px;
            z-index: 999;
            overflow-y: auto;
        }

        .info-page.show {
            display: block;
            animation: fadeIn 1s ease-in-out;
        }

        .info-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .info-page h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            color: #ffffff;
        }

        .eye-info {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.8;
            color: #cccccc;
        }

        .form-group {
            margin-bottom: 25px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 1.1rem;
            color: #ffffff;
            font-weight: bold;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .button-group {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-save {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .btn-save:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        .btn-back {
            background: linear-gradient(45deg, #ffffff, #cccccc);
            color: #000000;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
        }

        .btn-back:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 255, 255, 0.4);
        }

        .saved-info {
            margin-top: 30px;
            padding: 20px;
            background: rgba(76, 175, 80, 0.1);
            border: 2px solid rgba(76, 175, 80, 0.3);
            border-radius: 10px;
            display: none;
        }

        .saved-info.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        .saved-info h3 {
            color: #4CAF50;
            margin-bottom: 15px;
        }

        .saved-info p {
            margin-bottom: 10px;
            color: #ffffff;
        }

        .saved-info strong {
            color: #4CAF50;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .eye-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 20px;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
        }

        .eye-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <a href="threejs_movie_emotions.html" class="play-btn">Play</a>
    <a href="final_presentation/index.html" class="final-presentation-btn">Final Presentation</a>

    <div class="container" id="mainPage">
        <div class="see-through-text">
            See Through
        </div>
        
        <div class="drag-hint">
            Drag eyes around • Hover to reveal • Click to see through
        </div>

        <div id="eyeContainer"></div>
    </div>

    <div class="explore-buttons">
        <a href="2d-explore.html" class="explore-btn">2D Explore</a>
        <a href="3d-explore.html" class="explore-btn">3D Explore</a>
        <a href="temporal-explore.html" class="explore-btn">Temporal Explore</a>
        <a href="relational-structures.html" class="explore-btn">Relational Structures</a>
    </div>

    <div class="page-transition" id="transition"></div>
    
    <div class="info-page" id="infoPage">
        <div class="info-container">
            <div class="eye-preview" id="eyePreview">
                <img src="" alt="Selected Eye" id="previewImg">
            </div>
            
            <h1 id="pageTitle">Eye Information</h1>
            <p class="eye-info" id="eyeInfo">You've seen through this eye. Add your insights below:</p>
            
            <form id="infoForm">
                <div class="form-group">
                    <label for="eyeName">Eye Name:</label>
                    <input type="text" id="eyeName" name="eyeName" placeholder="Give this eye a name...">
                </div>
                
                <div class="form-group">
                    <label for="visionType">What did you see?</label>
                    <input type="text" id="visionType" name="visionType" placeholder="Describe your vision...">
                </div>
                
                <div class="form-group">
                    <label for="insights">Insights & Notes:</label>
                    <textarea id="insights" name="insights" placeholder="Share your deeper insights and observations..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="emotion">Emotional Response:</label>
                    <input type="text" id="emotion" name="emotion" placeholder="How did this make you feel?">
                </div>
                
                <div class="form-group">
                    <label for="timestamp">Date & Time:</label>
                    <input type="datetime-local" id="timestamp" name="timestamp">
                </div>
            </form>
            
            <div class="button-group">
                <button class="btn btn-save" onclick="saveInformation()">Save Vision</button>
                <button class="btn btn-back" onclick="returnToEyes()">Return to Eyes</button>
            </div>
            
            <div class="saved-info" id="savedInfo">
                <h3>Vision Saved Successfully!</h3>
                <div id="savedContent"></div>
            </div>
        </div>
    </div>

    <script>
        const eyeImages = [
            'assets/images/Untitled-1.png',
            'assets/images/Untitled-2.png',
            'assets/images/Untitled-3.png',
            'assets/images/Untitled-4.png',
            'assets/images/Untitled-5.png',
            'assets/images/Untitled-6.png',
            'assets/images/Untitled-7.png',
            'assets/images/Untitled-8.png',
            'assets/images/Untitled-9.png',
            'assets/images/Untitled-10.png',
            'assets/images/Untitled-12.png',
            'assets/images/Untitled-13.png',
            'assets/images/Untitled-15.png'
        ];

        const eyeLabels = [
            'Cleansing Emotional Data',
            'The Normalizing Machine',
            'Level of Confidence',
            'imageNet Roulette',
            'Machine Bias',
            'Situated Science',
            'Data Against Feminicide',
            'Measuring Diversity',
            'The Counted',
            'White Collar Crime Risk Zones',
            'The Murder of June Knightly',
            'Earshot (Human Right)',
            'Liminal (Pierre Huyghe)'
        ];
        
        const closedEyeImage = 'assets/images/Untitled-16.png';
        let isDragging = false;
        let dragStartTime = 0;
        let currentEyeIndex = 0;
        let savedVisions = JSON.parse(localStorage.getItem('eyeVisions')) || {};

        function createFloatingEye(imageSrc, index) {
            const eye = document.createElement('div');
            eye.className = 'eye';
            eye.innerHTML = `
                <img src="${imageSrc}" alt="Eye ${index + 1}">
                <div class="eye-label">${eyeLabels[index]}</div>
            `;
            eye.dataset.eyeIndex = index;
            eye.dataset.imageSrc = imageSrc;
            
            // Random position (accounting for larger size)
            const x = Math.random() * (window.innerWidth - 400);
            const y = Math.random() * (window.innerHeight - 400);
            eye.style.left = Math.max(0, x) + 'px';
            eye.style.top = Math.max(0, y) + 'px';
            
            // Random animation delay
            eye.style.animationDelay = Math.random() * 3 + 's';
            
            // Drag functionality
            let dragData = {
                isDragging: false,
                startX: 0,
                startY: 0,
                offsetX: 0,
                offsetY: 0
            };

            // Mouse events
            eye.addEventListener('mousedown', function(e) {
                e.preventDefault();
                dragStartTime = Date.now();
                dragData.isDragging = true;
                dragData.startX = e.clientX;
                dragData.startY = e.clientY;
                dragData.offsetX = e.clientX - this.offsetLeft;
                dragData.offsetY = e.clientY - this.offsetTop;
                this.classList.add('dragging');
                isDragging = true;
            });

            // Touch events for mobile
            eye.addEventListener('touchstart', function(e) {
                e.preventDefault();
                dragStartTime = Date.now();
                const touch = e.touches[0];
                dragData.isDragging = true;
                dragData.startX = touch.clientX;
                dragData.startY = touch.clientY;
                dragData.offsetX = touch.clientX - this.offsetLeft;
                dragData.offsetY = touch.clientY - this.offsetTop;
                this.classList.add('dragging');
                isDragging = true;
            });

            // Global mouse move
            document.addEventListener('mousemove', function(e) {
                if (dragData.isDragging) {
                    e.preventDefault();
                    const newX = e.clientX - dragData.offsetX;
                    const newY = e.clientY - dragData.offsetY;
                    
                    // Keep within bounds
                    const boundedX = Math.max(0, Math.min(window.innerWidth - 400, newX));
                    const boundedY = Math.max(0, Math.min(window.innerHeight - 400, newY));
                    
                    eye.style.left = boundedX + 'px';
                    eye.style.top = boundedY + 'px';
                }
            });

            // Global touch move
            document.addEventListener('touchmove', function(e) {
                if (dragData.isDragging) {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const newX = touch.clientX - dragData.offsetX;
                    const newY = touch.clientY - dragData.offsetY;
                    
                    // Keep within bounds
                    const boundedX = Math.max(0, Math.min(window.innerWidth - 400, newX));
                    const boundedY = Math.max(0, Math.min(window.innerHeight - 400, newY));
                    
                    eye.style.left = boundedX + 'px';
                    eye.style.top = boundedY + 'px';
                }
            });

            // Global mouse up
            document.addEventListener('mouseup', function(e) {
                if (dragData.isDragging) {
                    dragData.isDragging = false;
                    eye.classList.remove('dragging');
                    
                    // Check if it was a click (short duration, minimal movement)
                    const dragDuration = Date.now() - dragStartTime;
                    const dragDistance = Math.sqrt(
                        Math.pow(e.clientX - dragData.startX, 2) + 
                        Math.pow(e.clientY - dragData.startY, 2)
                    );
                    
                    if (dragDuration < 200 && dragDistance < 10) {
                        // It was a click, not a drag
                        handleEyeClick(eye);
                    }
                    
                    isDragging = false;
                }
            });

            // Global touch end
            document.addEventListener('touchend', function(e) {
                if (dragData.isDragging) {
                    dragData.isDragging = false;
                    eye.classList.remove('dragging');
                    
                    // Check if it was a tap
                    const dragDuration = Date.now() - dragStartTime;
                    if (dragDuration < 200) {
                        handleEyeClick(eye);
                    }
                    
                    isDragging = false;
                }
            });

            // Continuous floating movement (only when not being dragged)
            setInterval(() => {
                if (!dragData.isDragging && !eye.classList.contains('closing')) {
                    const currentX = parseFloat(eye.style.left);
                    const currentY = parseFloat(eye.style.top);
                    
                    let newX = currentX + (Math.random() - 0.5) * 100;
                    let newY = currentY + (Math.random() - 0.5) * 100;
                    
                    // Keep within bounds
                    newX = Math.max(0, Math.min(window.innerWidth - 400, newX));
                    newY = Math.max(0, Math.min(window.innerHeight - 400, newY));
                    
                    eye.style.left = newX + 'px';
                    eye.style.top = newY + 'px';
                }
            }, 4000 + Math.random() * 3000);
            
            return eye;
        }

        function handleEyeClick(eye) {
            if (!eye.classList.contains('closing')) {
                eye.classList.add('closing');
                eye.querySelector('img').src = closedEyeImage;

                currentEyeIndex = parseInt(eye.dataset.eyeIndex);
                const imageSrc = eye.dataset.imageSrc;
                const eyeLabel = eyeLabels[currentEyeIndex];

                // Check if this is "Cleansing Emotional Data" (index 0)
                if (currentEyeIndex === 0) {
                    // Redirect to the data sheet page
                    setTimeout(() => {
                        window.location.href = 'cleansing-emotional-data.html';
                    }, 300);
                    return;
                }

                // Set up the info page for other eyes
                document.getElementById('previewImg').src = imageSrc;
                document.getElementById('pageTitle').textContent = eyeLabel;
                document.getElementById('eyeInfo').textContent = `You've seen through "${eyeLabel}". Add your insights below:`;

                // Load saved data if exists
                loadSavedVision(currentEyeIndex);

                // Set current timestamp
                const now = new Date();
                document.getElementById('timestamp').value = now.toISOString().slice(0, 16);

                // Transition to info page
                setTimeout(transitionToInfoPage, 300);
            }
        }

        function loadSavedVision(eyeIndex) {
            const saved = savedVisions[eyeIndex];
            if (saved) {
                document.getElementById('eyeName').value = saved.eyeName || '';
                document.getElementById('visionType').value = saved.visionType || '';
                document.getElementById('insights').value = saved.insights || '';
                document.getElementById('emotion').value = saved.emotion || '';
                document.getElementById('timestamp').value = saved.timestamp || '';
            } else {
                // Clear form for new entry
                document.getElementById('infoForm').reset();
                const now = new Date();
                document.getElementById('timestamp').value = now.toISOString().slice(0, 16);
            }
        }

        function saveInformation() {
            const formData = {
                eyeName: document.getElementById('eyeName').value,
                visionType: document.getElementById('visionType').value,
                insights: document.getElementById('insights').value,
                emotion: document.getElementById('emotion').value,
                timestamp: document.getElementById('timestamp').value
            };
            
            // Save to localStorage
            savedVisions[currentEyeIndex] = formData;
            localStorage.setItem('eyeVisions', JSON.stringify(savedVisions));
            
            // Show saved confirmation
            const savedInfo = document.getElementById('savedInfo');
            const savedContent = document.getElementById('savedContent');
            
            savedContent.innerHTML = `
                <p><strong>Eye:</strong> ${formData.eyeName || eyeLabels[currentEyeIndex]}</p>
                <p><strong>Vision:</strong> ${formData.visionType}</p>
                <p><strong>Emotion:</strong> ${formData.emotion}</p>
                <p><strong>Time:</strong> ${new Date(formData.timestamp).toLocaleString()}</p>
            `;
            
            savedInfo.classList.add('show');
            
            // Hide after 3 seconds
            setTimeout(() => {
                savedInfo.classList.remove('show');
            }, 3000);
        }

        function initializeEyes() {
            const container = document.getElementById('eyeContainer');
            container.innerHTML = '';
            
            eyeImages.forEach((imageSrc, index) => {
                const eye = createFloatingEye(imageSrc, index);
                container.appendChild(eye);
            });
        }

        function transitionToInfoPage() {
            const transition = document.getElementById('transition');
            const infoPage = document.getElementById('infoPage');
            
            transition.classList.add('active');
            
            setTimeout(() => {
                infoPage.classList.add('show');
            }, 500);
        }

        function returnToEyes() {
            const transition = document.getElementById('transition');
            const infoPage = document.getElementById('infoPage');
            
            infoPage.classList.remove('show');
            transition.classList.remove('active');
            
            setTimeout(() => {
                initializeEyes();
            }, 500);
        }

        // Initialize the experience
        window.addEventListener('load', initializeEyes);
        
        // Handle window resize
        window.addEventListener('resize', () => {
            const eyes = document.querySelectorAll('.eye');
            eyes.forEach(eye => {
                const x = Math.min(parseFloat(eye.style.left), window.innerWidth - 400);
                const y = Math.min(parseFloat(eye.style.top), window.innerHeight - 400);
                eye.style.left = Math.max(0, x) + 'px';
                eye.style.top = Math.max(0, y) + 'px';
            });
        });

        // Prevent context menu on right click
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
    </script>
</body>
</html>
